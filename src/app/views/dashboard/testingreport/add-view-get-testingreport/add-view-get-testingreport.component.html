<div class="container" *ngIf="test">
  <div class="module-actions">
    <button class="tertiary" (click)="back()">Back to test reports</button>
    <button class="tertiary" *ngIf="test.CreateDate && test.CreateDate.length" (click)="generatePdf()">Print
      report</button>
  </div>

  <div class="cards">
    <!-- <app-images></app-images> -->

    <div class="card">
      <div class="top">
        <h3>
          Customer*
        </h3>
        <div class="col">
          <button class="tertiary" (click)="changeCustomer = true">Change customer</button>
        </div>
      </div>

      <div class="card-data" *ngIf="test.Customer">

        <div class="form-item">
          <label>Customer name</label>
          <input type="text" name="" (change)="saveCustomer()" id="" [(ngModel)]="test.Customer.Name">
        </div>

        <div class="form-item">
          <label>Email Address*</label>
          <input type="text" name="" id="" [(ngModel)]="test.Customer.Email" (change)="saveCustomer()"
            placeholder="Customer email.">
        </div>




        <div class="form-item">
          <label>Address</label>
          <input type="text" name="" id="" [(ngModel)]="test.Customer.AddressLineHome" placeholder="Customer Address.">
        </div>
      </div>
    </div>



    <div class="card">
      <div class="top">
        <h3>
          Compressor*
        </h3>
        <div class="col">
          <button class="tertiary" (click)="selectMachine = true">Change Compressor</button>
        </div>
      </div>

      <div class="card-data" *ngIf="test.Customer">

        <div class="form-item">
          <label>Compressor Name/Model</label>
          <input type="text" name="" id="" [(ngModel)]="test.MachineName" placeholder="Model.">
        </div>

        <div class="form-item">
          <label>Compressor Serial*</label>
          <input type="text" name="" id="" [(ngModel)]="test.SerialNo" placeholder="Serial.">
        </div>

      </div>
    </div>


    <div class="card">
      <div class="top">
        <h3>
          Basic details*
        </h3>
      </div>

      <div class="card-data" *ngIf="test">

        <div class="form-item">
          <label>Certificate Number</label>
          <input type="text" name="" [(ngModel)]="test.CertNo">
        </div>


        <div class="form-item">
          <label>Dol</label>
          <input type="text" name="" [(ngModel)]="test.Dol">
        </div>


        <div class="form-item">
          <label>Date Of Test</label>
          <input type="date" name="" [(ngModel)]="test.DateOfTest">
        </div>


        <div class="form-item">
          <label>Start Time</label>
          <input type="time" name="" [(ngModel)]="test.StartTime">
        </div>


        <div class="form-item">
          <label>End Time</label>
          <input type="time" name="" [(ngModel)]="test.EndTime">
        </div>

        <div class="form-item">
          <label>Vessel Location</label>
          <input type="text" name="" [(ngModel)]="test.Location">
        </div>

        <div class="form-item">
          <label>Next inspection date</label>
          <input type="date" name="" [(ngModel)]="test.NextInspectionDate">
        </div>

        <div class="form-item">
          <label>Reason For Test</label>
          <input type="text" name="" [(ngModel)]="test.ReasonForTest">
        </div>

        <div class="form-item">
          <label>Initial Installation</label>
          <input type="text" name="" [(ngModel)]="test.InitialInstallation">
        </div>

        <div class="form-item">
          <label>Visual Inspection</label>
          <input type="text" name="" [(ngModel)]="test.VisualInspection">
        </div>

      </div>
    </div>




    <div class="card">
      <div class="top">
        <h3>
          Nameplate details*
        </h3>
      </div>

      <div class="card-data" *ngIf="test">

        <div class="form-item">
          <label>Manufacturer</label>
          <input type="text" name="" [(ngModel)]="test.Manufacturer">
        </div>
        <div class="form-item">
          <label>Country Of Origin</label>
          <input type="text" name="" [(ngModel)]="test.CountryOfOrigin">
        </div>

        <div class="form-item">
          <label>Year Of Manufacture</label>
          <input type="text" name="" [(ngModel)]="test.YearOfManufacture">
        </div>

        <div class="form-item">
          <label>Serial No</label>
          <input type="text" name="" [(ngModel)]="test.SerialNo">
        </div>

        <div class="form-item">
          <label>Capacity</label>
          <input type="text" name="" [(ngModel)]="test.Capacity">
        </div>

        <div class="form-item">
          <label>Mark of AIA</label>
          <input type="text" name="" [(ngModel)]="test.MarkOfApprovedInspectionAuth">
        </div>

        <div class="form-item">
          <label>Standard Of Design</label>
          <input type="text" name="" [(ngModel)]="test.StandardOfDesign">
        </div>

        <div class="form-item">
          <label>Minimum Operating Temperature</label>
          <input type="tel" name="" [(ngModel)]="test.MinOperatingTemperature">
        </div>

        <div class="form-item">
          <label>Maximum Operating Temperature</label>
          <input type="tel" name="" [(ngModel)]="test.MaxOperatingTemperature">
        </div>

        <div class="form-item">
          <label>Class Or Category</label>
          <input type="text" name="" [(ngModel)]="test.ClassOrCategory">
        </div>

        <div class="form-item">
          <label>Maximum Working Pressure</label>
          <input type="text" name="" [(ngModel)]="test.MaximumWorkingPressure">
        </div>

        <div class="form-item">
          <label>Design Pressure</label>
          <input type="text" name="" [(ngModel)]="test.DesignPressure">
        </div>

        <div class="form-item">
          <label>Test Pressure Gauge</label>
          <input type="text" name="" [(ngModel)]="test.TestPressureGauge">
        </div>

        <div class="form-item">
          <label>Test Pump</label>
          <input type="text" name="" [(ngModel)]="test.TestPump">
        </div>

      </div>
    </div>



    <div class="card" *ngIf="test.Remarks">
      <div class="top top-col1">
        <h3>
          REMARKS
        </h3>

        <div class="questions">
          <div class="question" *ngFor="let question of test.Remarks">
            <div class="question-input">
              <textarea name="" [(ngModel)]="question.Answer" id="" cols="30" placeholder="Enter remark here"
                rows="10"></textarea>
            </div>
          </div>

          <div class="question" *ngIf="newRemark">
            <div class="question-input">
              <textarea name="" [(ngModel)]="newRemark.Answer" placeholder="Enter remark here"
                (change)="saveRemark(newRemark)" id="" cols="30" rows="10"></textarea>
            </div>
          </div>
          <!-- <button class="tertiary">Add Remark</button> -->
        </div>
      </div>
    </div>

    <div class="card" *ngIf="test.Questiontests">
      <div class="top top-col1">
        <h3>
          Inspection results: Yes | No | N/a
        </h3>

        <div class="questions">
          <div class="question" *ngFor="let question of test.Questiontests">
            <h4>
              {{question.Question}}
            </h4>

            <div class="question-actions" *ngIf="question.Options && question.Options.length">
              <button *ngFor="let option of question.Options" [ngClass]="option.Classes"
                (click)="selectOption(option, question)">{{option.Name}}</button>
            </div>
            <div class="question-input" *ngIf="!question.Options || !question.Options.length">
              <input type="text">
            </div>
          </div>
        </div>
      </div>
    </div>





    <div class="card">
      <div class="top">
        <h3>
          Signatures*
        </h3>
        <div class="col">
        </div>
      </div>

      <div class="card-data" *ngIf="test.Customer">

        <div class="form-item">
          <label>Customer Signature </label>
          <div class="sign">
            <div class="sign-done" *ngIf="test.TestDoneBySig">
              <img (click)="showSign = true;  heading = 'Sign here'" [src]="test.TestDoneBySig" alt="">
              <p>
                {{test.TestDoneBy}}
              </p>
            </div>
            <button *ngIf="!test.AssistedBySig" class="tertiary" (click)="showSign = true;  heading = 'Sign here'">Click
              to sign</button>
          </div>
        </div>
      </div>
    </div>
    <div class="actions">
      <button class="primary" *ngIf="test.CreateDate" (click)="save()">Save</button>
    </div>


  </div>
</div>



<app-customer-selector *ngIf="user && !test || !test.Customer || changeCustomer" [user]="user"
  (doneSelectingCustomer)="doneSelectingCustomer($event)"></app-customer-selector>


<app-item-selector *ngIf="selectMachine" [user]="user" [customer]="test.Customer"
  (doneSelectingMachine)="onItemSelectedMachineEvent($event)"></app-item-selector>


<div class="quick-add" *ngIf="showSign">
  <div class="form">
    <h3 class="">
      {{heading}}
    </h3>

    <div style="border: 1px dotted rgb(109, 109, 109);">
      <app-signiture-widget (onUploadFinished)="onUploadFinished($event)" [useBase64]="useBase64" [user]="user"></app-signiture-widget>
    </div>

    <div class="form-item">
      <div class="link" (click)="showSign = false">Cancel</div>
    </div>
  </div>
</div>


<!-- <app-user-feedback *ngIf="modalModel && modalModel.heading" [modalModel]="modalModel"></app-user-feedback> -->
